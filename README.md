# CYBERSORTx Guide
This is a simple guide to run [CYBERSORTx](https://cibersortx.stanford.edu/) on the web.

Reference: [NEWMAN, et al. Determining cell type abundance and expression from bulk tissues with digital cytometry. 2019](https://pubmed.ncbi.nlm.nih.gov/31061481/).

## About
CIBERSORTx is an analytical tool capable of imputing gene expression profiles and providing an estimation of cellular abundances for different cell types present in a given sample, using gene expression data.

## How to access?
To run analysis in [CYBERSORTx](https://cibersortx.stanford.edu/) it is necessary to create a login account on the website. Generally, the approval of the login may take a few days.

## How do I start to make an analysis?
To start an analysis, simply access the page with your login and choose the option **Run CIBERSORTx** in **Menu**.

Three modules are presented to you:
### Module 1- Create Signature Matrix
Module 1 corresponds to the creation of signature matrices which you can use to infer cellular fractions or cellular expression in the other two modules.

To create the signature matrix, you need to provide the following information and upload two different files:

  1. Reference file: A table of gene expression profiles of reference cell populations that will be compared against each other. This file is used to define the potential phenotype classes for generating the custom signature gene file.
  2. Phenotype file: A table containing the cell type classes that will be used to define the classes in the signature gene file.

Please ensure that the data type of expression (RNAseq, Single-cell RNAseq, Microarray) is correctly specified when creating the matrix.

**To run an example, simply choose the option** ```Example``` **and select any of the test options.**

### Module 2- Impute Cells fractions
Module 2 allows us to infer the cellular fractions present in a sample.

To perform this type of analysis, you need two files and the definition of the number of permutations to be performed per analysis:

  1. Signature matrix: The signature matrix is the data that allows the identification of the cellular profile present in a given sample. In this field, you can choose the matrix generated by the user in Module 1 or choose from various pre-defined options provided by the tool (e.g., LM22 matrix - 22 immune cell types).
  2. Mixture file: The expression matrix that will be used to impute the cellular fractions. The expression matrix should ideally be normalized in FPKM (fragments per kilobase of transcript per million reads mapped).
  3. Permutations for significance analysis: You can specify the number of permutations to be performed for significance analysis, ranging from 0 to 1000.

Additionally, the tool also provides options for data correction during the analysis, which include:

  a. Batch Correction;
  
  b. Quantile normalization (Recommended to disable for RNAseq data);
  
  c. Absolute mode- Scales relative cellular fractions into a score that reflects the absolute proportion of each cell type in a mixture;

**To run an example, simply choose the option** ```Example``` **and select any of the test options.**

### Module 3- Impute Cells Expression
Finally, the last module allows us to identify the expression levels of each cellular group, either by grouping them or presenting them at the sample level.

To perform this type of analysis, you need four files:

  1. Signature matrix (explained above).
  2. Mixture file (explained above).
  3. Grouped class file: A file that relabels the phenotypes in your signature matrix according to broader phenotypes or groups.
  4. Ground truth file (optional): A file with known gene expression profiles for your cells of interest. This file serves for quality control purposes.

**To run an example, simply choose the option** ```Example``` **and select any of the test options.**

## Results
Once an analysis is initiated, the tool opens a page where you can track the progress of the process and see how long it is taking. It is important to note that even if the page is closed, the analysis continues to run on the tool's servers.

Once the analysis is completed, you will be redirected to the results visualization page. There, you will be given options to download the generated graphs and matrices produced by the tool.

If, for some reason, your browser was closed, you can still check the progress of your analysis and access the results by following these steps:
  1. Acess [CYBERSORTx](https://cibersortx.stanford.edu/) and login;
  2. In ```Menu``` select ```Job Results```

In this tab, you will find all the analyses that have been performed. To view the results, simply click on the icon ```View hob results``` in ```Actions``` column.

To download the results, simply choose one of the file type options in the column ```Download``` for the desired type of file to be downloaded.
